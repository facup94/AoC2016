keypad_map = {
    (1, 'U'): 1, (1, 'D'): 3, (1, 'L'): 1, (1, 'R'): 1,
    (2, 'U'): 2, (2, 'D'): 6, (2, 'L'): 2, (2, 'R'): 3,
    (3, 'U'): 1, (3, 'D'): 7, (3, 'L'): 2, (3, 'R'): 4,
    (4, 'U'): 4, (4, 'D'): 8, (4, 'L'): 3, (4, 'R'): 4,
    (5, 'U'): 5, (5, 'D'): 5, (5, 'L'): 5, (5, 'R'): 6,
    (6, 'U'): 2, (6, 'D'): 'A', (6, 'L'): 5, (6, 'R'): 7,
    (7, 'U'): 3, (7, 'D'): 'B', (7, 'L'): 6, (7, 'R'): 8,
    (8, 'U'): 4, (8, 'D'): 'C', (8, 'L'): 7, (8, 'R'): 9,
    (9, 'U'): 9, (9, 'D'): 9, (9, 'L'): 8, (9, 'R'): 9,
    ('A', 'U'): 6, ('A', 'D'): 'A', ('A', 'L'): 'A', ('A', 'R'): 'B',
    ('B', 'U'): 7, ('B', 'D'): 'D', ('B', 'L'): 'A', ('B', 'R'): 'C',
    ('C', 'U'): 8, ('C', 'D'): 'C', ('C', 'L'): 'B', ('C', 'R'): 'C',
    ('D', 'U'): 'B', ('D', 'D'): 'D', ('D', 'L'): 'D', ('D', 'R'): 'D'
}

current_pos = 5

with open('input.txt', 'r') as f:
    for line in f:
        for char in line.strip():
            current_pos = keypad_map[(current_pos, char)]

        print(current_pos, end='')
